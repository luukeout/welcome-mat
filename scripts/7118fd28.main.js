"use strict";function getHouse(a){shuffledList.length<=2&&(shuffledList=_.shuffle(a));for(var b=0;3>b;b++)houseList[b]=shuffledList.pop();router.navigate("game",{trigger:!0})}function parseXml(a){var b=$(a).find("zpid").text(),c=$(a).find("url").first().text(),d=$(a).find("price").text(),e=$(a).find("bedrooms").text(),f=$(a).find("bathrooms").text(),g=$(a).find("finishedSqFt").text(),h=$(a).find("lotSizeSqFt").text(),i=$(a).find("street").text(),j=$(a).find("city").text(),k=$(a).find("state").text(),l=$(a).find("homeDetails").text(),d=numeral(d).format("0,0"),g=numeral(g).format("0,0"),h=numeral(h).format("0,0"),m=properties.add({zpid:b,pic:c,price:d,bedrooms:e,bathrooms:f,sqft:g,lotSize:h,street:i,city:j,state:k,homeDetails:l});window.housePrices.push(m.attributes.price);new TilesView({model:m.attributes})}function apiCall(a){$.ajax({type:"GET",url:"http://0.0.0.0:3000/api/property/"+a,dataType:"xml",success:parseXml})}var Property=Backbone.Model.extend({defaults:{zpid:"",pic:"",price:"",bedrooms:"",bathrooms:"",sqft:"",lotSize:""}}),PropertiesCollection=Backbone.Collection.extend({model:Property,url:""}),StartView=Backbone.View.extend({template:_.template($(".start-box-template").text()),events:{"click .button":"changeView"},initialize:function(){$(".start-box").append(this.el),this.render()},render:function(){this.$el.html(this.template())},changeView:function(){router.navigate("price",{trigger:!0})}}),SelectView=Backbone.View.extend({template:_.template($(".select-box-template").text()),events:{"click .button":"getArray"},initialize:function(){$(".start-box").append(this.el),this.render()},render:function(){this.$el.html(this.template())},getArray:function(a){"one-hun"===a.currentTarget.id?(window.shuffledList=_.shuffle(oneHundred),getHouse(oneHundred)):"one-fif"===a.currentTarget.id?(window.shuffledList=_.shuffle(oneFifty),getHouse(oneFifty)):(window.shuffledList=_.shuffle(twoHundred),getHouse(twoHundred))}}),GamePrice=Backbone.View.extend({className:"match-price",template:_.template($(".match-price-template").text()),initialize:function(){$(".price-box").html(this.el),this.render()},render:function(){this.$el.html(this.template(this.model.attributes))}}),TilesView=Backbone.View.extend({className:"property-box",template:_.template($(".tiles-view-template").text()),events:{click:"matching"},initialize:function(){$(".tile-container").append(this.el),this.render(),$(".got-it").hide(),$(".home-price").hide(),$(".play-again").hide(),$(".sorry").hide();var a=this.model.bedrooms;this.beds(a);var b=this.model.bathrooms;this.baths(b)},render:function(){this.$el.append(this.template({model:this.model}))},matching:function(){this.model==randomHome.attributes?(this.$el.css("background","rgb(17, 177, 107)"),$(".home-price").slideUp(),$(".home-price").show("slow"),this.$(".got-it").slideDown("slow").show(),this.$(".play-again").show(),$(".play-again").click(function(){router.navigate("price",{trigger:!0})})):this.model!==randomHome.attributes&&(this.$el.css("background","rgb(250, 15, 81)"),this.$(".home-price").hide(),this.$(".sorry").show(),this.$(".play-again").hide())},beds:function(a){for(var b=[],c=a,d=0;c>d;d++)b.push("number");var e=this;b.forEach(function(){e.$(".bed-box").append('<img src="bed-darker.png">')})},baths:function(a){var b=[];if(a%1==0){for(var c=0;a>c;c++)b.push("number");var d=this;b.forEach(function(){d.$(".bath-box").append('<img src="bath-two.png">')})}else{for(var c=1;a>c;c++)b.push("number");var d=this;b.forEach(function(){d.$(".bath-box").append('<img src="bath-two.png">')}),d.$(".bath-box").append('<img src="bath-two-half.png">')}}}),AppRouter=Backbone.Router.extend({routes:{"":"startScreen",price:"priceScreen",game:"gameScreen"},startScreen:function(){$(".game-header").hide(),$(".tile-container").hide(),$(".start-box").html(""),new StartView,$(".start-box").show(),$(".brand").hide(),$(".disclaimer").hide()},priceScreen:function(){$(".game-header").hide(),$(".tile-container").hide(),$(".start-box").html(""),new SelectView,$(".start-box").show(),$(".brand").hide(),$(".disclaimer").hide()},gameScreen:function(){window.properties.reset(),window.housePrices=[],window.houseList.forEach(function(a){$.when(apiCall(a)).done($(".game-header, .tile-container").is(":hidden")?$(".game-header, .tile-container").slideDown("slow"):$(".game-header, .tile-container").hide())}),$(".start-box").hide(),$(".tile-container").html(""),$(".brand").slideUp(),$(".brand").show("slow"),$(".disclaimer").show()}}),router=new AppRouter;Backbone.history.start();var oneHundred=[11085227,11072468,11022580,11079201,11050639],oneFifty=[11085315,2128039685,11002304,10990739,11050615,67591730,11025069,11049372],twoHundred=[89804034,96458822,71251078,11025731,11014874,11001058,11045041,114444926,10991859,11011984,63663043,11078620,11002172,11055387,11082638],properties=new PropertiesCollection,randomHome;properties.on("add",function(){3===properties.length&&(randomHome=_.sample(properties.models),new GamePrice({model:randomHome}))});var houseList=[];